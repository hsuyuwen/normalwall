<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>ä¸€èˆ¬ç‰†é…ç­‹è¨ˆç®—</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 800px; margin: auto; }
    input, select { padding: 6px; margin: 6px 0; width: 100%; }
    label { font-weight: bold; margin-top: 12px; display: block; }
    button { padding: 10px 20px; margin-top: 20px; }
    #result { margin-top: 30px; font-size: 16px; white-space: pre-wrap; background: #f3f3f3; padding: 15px; border-radius: 5px; }
    .ok { color: green; font-weight: bold; }
    .ng { color: red; font-weight: bold; }


	  .row { display: flex; gap: 20px; flex-wrap: wrap;  }
  .row label { display: flex; flex-direction: column; flex: 1 1 0;  } 
  .normal { font-weight: normal;  }
  </style>
</head>
<body oncontextmenu="return false">

  <div id="calculator">
    <h2>ä¸€èˆ¬ç‰†é…ç­‹è¨ˆç®—</h2>
  
<!-- âœ… é›™æ¬„æ’ç‰ˆ -->
<div style="display: flex; gap: 30px; align-items: flex-start;">

 <div style="flex: 1;">
    <div style="margin-bottom: 20px;">
      <img src="https://github.com/hsuyuwen/normalwall/raw/b8406d1339fa0585d28ef97ea3e44efc7f4d624f/%E4%B8%80%E7%8F%AD%E7%89%86.png" width="180">
    </div>
    
  </div>

  <!-- ğŸŸ¢ å³æ¬„ï¼šç‰†é«˜é•·åš + ä¸»ç­‹ fy -->
  <div style="flex: 1;">
    
      <label>ç‰†é«˜ Hï¼ˆcmï¼‰ï¼š<input type="number" id="H" value="500"></label>
      <label>ç‰†é•· Lï¼ˆcmï¼‰ï¼š<input type="number" id="L" value="100"></label>
      <label>ç‰†åš tï¼ˆcmï¼‰ï¼š<input type="number" id="t" value="20"></label>
      <label>ä¿è­·å±¤ c.c.ï¼ˆcmï¼‰ï¼š<input type="number" id="cc" value="2"></label>          
     
    </div>
</div>

 <div class="row">
      <label>æ··å‡åœŸå¼·åº¦ï¼š
        <select id="concreteGrade">
          <option value="280">280 kgf/cmÂ²</option>
          <option value="350">350 kgf/cmÂ²</option>
          <option value="420">420 kgf/cmÂ²</option>
        </select>
      </label>   

      <label>ä¸»ç­‹é™ä¼ fyï¼ˆkgf/cmÂ²ï¼‰ï¼š
        <select id="fy">
          <option value="2800">2800 kgf/cmÂ²</option>
          <option value="4200">4200 kgf/cmÂ²</option>
          <option value="4900">4900 kgf/cmÂ²</option>
          <option value="5600">5600 kgf/cmÂ²</option>
        </select>
      </label>
    </div>
	  
    <label>
    <div class="row">	
    <label>å‚ç›´ç­‹è™Ÿæ•¸ï¼š
      <select id="vrebar">
        <option value="D13">D13</option>
        <option value="D16">D16</option>
        <option value="D19">D19</option>
        <option value="D22">D22</option>
        <option value="D25">D25</option>
        <option value="D28">D28</option>
        <option value="D29">D29</option>
        <option value="D32">D32</option>
        <option value="D36">D36</option>
      </select>
    </label>
    <label>å‚ç›´é‹¼ç­‹é–“è·ï¼ˆcmï¼‰ï¼š<input type="number" id="S_V" value="20"></label>	
    </div>

    <label>
    <div class="row">	
    <label>æ°´å¹³ç­‹è™Ÿæ•¸ï¼š
      <select id="hrebar">
        <option value="D13">D13</option>
        <option value="D16">D16</option>
        <option value="D19">D19</option>
        <option value="D22">D22</option>
        <option value="D25">D25</option>
        <option value="D28">D28</option>
        <option value="D29">D29</option>
        <option value="D32">D32</option>
        <option value="D36">D36</option>
      </select>
    </label>
    <label>æ°´å¹³é‹¼ç­‹é–“è·ï¼ˆcmï¼‰ï¼š<input type="number" id="S_H" value="20"></label>
    </div>	
	
    <label>
    <div class="row">	
    <label>SDSï¼š<input type="number" id="SDS" value="0.81"></label>
    <label>ç”¨é€”ä¿‚æ•¸ Iï¼š<input type="number" id="Ip" value="1.25"></label>
    </div>	
	
    <label>
    <div class="row">
    <label>åœ°é¢è‡³ç‰†åº• h1ï¼ˆmï¼‰ï¼š<input type="number" id="h1" value="4.6"></label>
    <label>ç‰†é«˜ h2ï¼ˆmï¼‰ï¼š<input type="number" id="h2" value="9.4"></label>
    </div>	
		
    <label>
    <div class="row">	
    <label>é¢¨å£“ Fwï¼ˆkgf/mÂ²ï¼‰ï¼š<input type="number" id="Fw" value="500"></label>
    <label>éœè¼‰é‡ SDLï¼ˆkgf/mÂ²ï¼‰ï¼š<input type="number" id="SDL" value="500"></label>
    </div>	

    <label>
    <div class="row">		
    <label>ç‰†å‹ï¼š
      <select id="a1">
        <option value="éæ‡¸è‡‚">éæ‡¸è‡‚</option>
        <option value="æ‡¸è‡‚">æ‡¸è‡‚</option>
      </select>
    </label>

    <label>å·¥å€é¡å‹ï¼š
      <select id="a2">
        <option value="ä¸€èˆ¬å·¥å€">ä¸€èˆ¬å·¥å€</option>
        <option value="è‡ºåŒ—ç›†åœ°">è‡ºåŒ—ç›†åœ°</option>
      </select>
    </label>
    </div>	
	
    <button onclick="calculate()">è¨ˆç®—</button>
    <div id="result"></div>
  </div>

  <script>


    const rebarTable = {
      D13: { db: 1.27, A: 1.27 },
      D16: { db: 1.59, A: 1.99 },
      D19: { db: 1.91, A: 2.87 },
      D22: { db: 2.22, A: 3.87 },
      D25: { db: 2.54, A: 5.07 },
      D28: { db: 2.87, A: 6.47 },
      D29: { db: 2.87, A: 6.47 },
      D32: { db: 3.23, A: 8.17 },
      D36: { db: 3.58, A: 10.07 },
    };

    function calculate() {
      const H = +document.getElementById("H").value;
      const L = +document.getElementById("L").value;
      const t = +document.getElementById("t").value;
      const cc = +document.getElementById("cc").value;
      const fc = +document.getElementById("concreteGrade").value;
      const fy = +document.getElementById("fy").value;
      const hrebar = document.getElementById("hrebar").value;
      const vrebar = document.getElementById("vrebar").value;
      const S_H = +document.getElementById("S_H").value;
      const S_V = +document.getElementById("S_V").value;
      const SDS = +document.getElementById("SDS").value;
      const Ip = +document.getElementById("Ip").value;
      const h1 = +document.getElementById("h1").value;
      const h2 = +document.getElementById("h2").value;
      const Fw = +document.getElementById("Fw").value;
      const SDL = +document.getElementById("SDL").value;
      const a1 = document.getElementById("a1").value;
      const a2 = document.getElementById("a2").value;

      let ap, Rp;

if (a1 === "éæ‡¸è‡‚") {
  ap = 1;
  Rp = 2.5;
} else if (a1 === "æ‡¸è‡‚") {
  ap = 2.5;
  Rp = 2.5;
}
   let Rpa;

if (a2 === "è‡ºåŒ—ç›†åœ°") {
 Rpa = 1 + (Rp - 1) / 2
} else  {
  Rpa = 1 + (Rp - 1) / 1.5
}
      const W = (t / 100) * 2.4 + SDL / 1000;
      const F = 0.4 * SDS * Ip * (ap / Rpa) * (1 + (2 * h1 / h2)) * W;
      const Fmax = 1.6 * SDS * Ip * W;
      const Fmin = 0.3 * SDS * Ip * W;
let Wu1;

if (F < Fmin) {
  Wu1 = Fmin;
} else if (F > Fmax) {
  Wu1 = Fmax;
} else {
  Wu1 = F;
}
      const Wu2 = 1.6 * Fw / 1000;
      const WuControl = Math.max(Wu1, Wu2);

let Mu, Vu;

if (a1 === "éæ‡¸è‡‚") {
  Mu = (WuControl * (H / L) ** 2) / 8;
  Vu = WuControl * H / L / 2;
} else {
  Mu = (WuControl * (H / L) ** 2) / 2;
  Vu = WuControl * H / L;
}

      const dbV = rebarTable[vrebar].db;
      const AbV = rebarTable[vrebar].A;
      const dbH = rebarTable[hrebar].db;
      const AbH = rebarTable[hrebar].A;

      const d = t - cc - dbV / 2;
let beta;

if (fc <= 280) {
  beta = 0.85;
} else {
  beta = Math.max(0.85 - 0.05 * ((fc - 280) / 70), 0.65);
}
      const et = fy / 2040000;
      const C = (0.003 / (0.006 + et)) * d;
      const aa = beta * C;

      const As_max = 0.85 * fc * aa * L / fy;
      const As_useV = AbV * (L / S_V) ;
      const As_useH = AbH * (L / S_H) ;

      const M = fy / (0.85 * fc);
      const Rn = Mu * 100000 / (0.9 * L * d * d);
      const lo1 = (1 / M) * (1 - Math.sqrt(1 - 2 * M * Rn / fy));
      const lo_min = Math.max(0.8 * Math.sqrt(fc) / fy, 14 / fy);
      const lo_temp =0.0018;
     const lo_v1 =0.0015;
     const lo_h1 =0.0025;

      const As1 = lo1 * L * d;
      const Asmin = lo_min * L * d;
      const Astemp = lo_temp* L * t;
      const Asv1 =  lo_v1 * L * d;
      const Asreqv = Math.max(Math.max(Math.max(Math.min(4 * As1 / 3, Asmin), Astemp), Asv1), As1);
      const Ash1 =lo_h1 * L * d;
      const Asreqh = Math.max(Astemp, Ash1);

      const AsUseMaxCheck = As_useV <= As_max;
let AsUseVCheckText, AsUseHCheckText;

if (As_useV > Asreqv) {
  AsUseVCheckText = `As_useV > As_req â†’ <span class="ok">OK</span>`;
} else {
  AsUseVCheckText = `As_useV < As_req â†’ <span class="ng">NG</span>`;
}

if (As_useH > Asreqh) {
  AsUseHCheckText = `As_useH > As_req â†’ <span class="ok">OK</span>`;
} else {
  AsUseHCheckText = `As_useH < As_req â†’ <span class="ng">NG</span>`;
}

let controlSource = (Wu1 < Wu2) ? "é¢¨åŠ›æ§åˆ¶" : "åœ°éœ‡åŠ›æ§åˆ¶";
    let resultText = `
æ§åˆ¶è¼‰é‡ä¾†æºï¼š${controlSource}


å¤–åŠ›è¨ˆç®—:
	<span class="normal">å…±æŒ¯æ”¾å¤§ä¿‚æ•¸  ap = ${ap.toFixed(3)} 

	åœ°éœ‡åæ‡‰æŠ˜æ¸›ä¿‚æ•¸  Rp = ${Rp.toFixed(3)} 

	å®¹è¨±åœ°éœ‡åæ‡‰æŠ˜æ¸›ä¿‚æ•¸  Rpa = 1 + ( Rp - 1 ) / 1.5 = ${Rpa.toFixed(3)} 

	è¨­è¨ˆæ°´å¹³ç¸½æ©«åŠ›  F = 0.4Ã— SDS Ã—IÃ— ap ( 1 + 2h1 / h2 ) W / Rpa = ${F.toFixed(3)} tf/mÂ²

	Fmax = 1.6 Ã— SDS Ã— I Ã— W = ${Fmax.toFixed(3)} tf/mÂ²

	Fmin =  0.3 Ã— SDS Ã— I Ã— W = ${Fmin.toFixed(3)} tf/mÂ²

	åœ°éœ‡åŠ›  Wu<sub>1</sub> = ${Wu1.toFixed(3)} tf/mÂ²

	é¢¨åŠ›  Wu<sub>2</sub> = 1.6 x Fw = ${Wu2.toFixed(3)} tf/mÂ²

	æ§åˆ¶è¼‰é‡  Wu = max ( Wu1, Wu2 ) = ${WuControl.toFixed(3)} tf/mÂ²

<strong>è¨­è¨ˆè¼‰é‡:</strong><br>
	æœ€å¤§å½çŸ©  Mu = ${Mu.toFixed(3)} tfÂ·m/m

	æœ€å¤§å‰ªåŠ›  Vu = ${Vu.toFixed(3)} tf/m

<strong>æ–·é¢é…ç­‹:</strong><br>

	æœ‰æ•ˆæ·±åº¦  d = ${d.toFixed(3)} cm

	æ‹‰æ§ç•Œé™æœ€å¤§é‹¼ç­‹é‡  As,<sub>max</sub> = ${As_max.toFixed(3)} cm<sup>2</sup>

	å‚ç›´å‘é‹¼ç­‹ä½¿ç”¨é‡  As,<sub>use_V</sub> = ${ As_useV.toFixed(3)} cm<sup>2</sup>

	æ°´å¹³å‘é‹¼ç­‹ä½¿ç”¨é‡  As,<sub>use_H</sub> = ${ As_useH.toFixed(3)} cm<sup>2</sup>

	ææ–™å¼·åº¦å¸¸æ•¸  m = fy / 0.85 / f 'c = ${M.toFixed(3)}

	é‹¼ç­‹å½çŸ©å› æ•¸  Rn = Mu / 0.9 / b / d 2 = ${Rn.toFixed(3)} 

	éœ€æ±‚é‹¼ç­‹æ¯”  Ï<sub>1</sub> =ï¼ˆ1 / mï¼‰Ã—ï¼»1-ï¼ˆ1 - 2 Ã— m Ã— Rn / fyï¼‰<sup>0.5</sup>ï¼½= ${ lo1.toFixed(4)} 

	æœ€å°é‹¼ç­‹æ¯”  Ï<sub>min</sub> = Maxï¼ˆ0.8 Ã— f 'c<sup>0.5</sup>/ fy , 14 / fyï¼‰= ${ lo_min.toFixed(4)} 

	æº«åº¦é‹¼ç­‹æ¯”  Ï<sub>temp</sub> = 0.0018

	æœ€å°‘å‚ç›´é‹¼ç­‹æ¯”  Ï<sub>v</sub> =  0.0015

	æœ€å°‘æ°´å¹³é‹¼ç­‹æ¯”  Ï<sub>h</sub> =  0.0025

å‚ç›´é‹¼ç­‹é‡			
	éœ€æ±‚é‹¼ç­‹é‡  As,<sub>1</sub> = Ï<sub>1</sub> Ã— L Ã— d  = ${ As1.toFixed(3)} cm<sup>2</sup>	
	
	æœ€å°é‹¼ç­‹é‡  As,<sub>min</sub> =Ï<sub>min</sub> Ã— L Ã— d = ${ Asmin.toFixed(3)} cm<sup>2</sup>
		
	æº«åº¦é‹¼ç­‹é‡  As,<sub>temp</sub>=Ï<sub>temp</sub> Ã— L Ã— d  = ${ Astemp.toFixed(3)} cm<sup>2</sup>
		
	æœ€å°‘é‹¼ç­‹æ¯”é‹¼ç­‹é‡  As,<sub>v1</sub>=Ï<sub>v1</sub> Ã— L Ã— d = ${ Asv1.toFixed(3)} cm<sup>2</sup>
			
	è¨­è¨ˆé‹¼ç­‹é‡  As,<sub>req</sub>  = ${ Asreqv.toFixed(3)} cm<sup>2</sup>		
		 	
æ°´å¹³é‹¼ç­‹é‡			
	æº«åº¦é‹¼ç­‹é‡  As,<sub>temp</sub>=Ï<sub>temp</sub> Ã— L Ã— d = ${ Astemp.toFixed(3)} cm<sup>2</sup>	
		
	æœ€å°‘é‹¼ç­‹æ¯”é‹¼ç­‹é‡  As,<sub>h1</sub>=Ï<sub>h1</sub> Ã— L Ã— d = ${ Ash1.toFixed(3)} cm<sup>2</sup>	
	
	è¨­è¨ˆé‹¼ç­‹é‡  As,<sub>req</sub>  = ${ Asreqh.toFixed(3)} cm<sup>2</sup>		


   å‚ç›´é‹¼ç­‹ As_useV = ${As_useV.toFixed(2)} cmÂ²ï¼ŒAs<sub>req</sub> = ${Asreqv.toFixed(2)} cmÂ² â†’ ${AsUseVCheckText}
   æ°´å¹³é‹¼ç­‹ As_useH = ${As_useH.toFixed(2)} cmÂ²ï¼ŒAs<sub>req</sub> = ${Asreqh.toFixed(2)} cmÂ² â†’ ${AsUseHCheckText}
    As_useV = ${As_useV.toFixed(2)} cmÂ² < As_max = ${As_max.toFixed(2)} cmÂ² â†’ ${AsUseMaxCheck ? '<span class="ok">OK</span>' : '<span class="ng">NG</span>'}
      `;

      document.getElementById("result").innerHTML = resultText;
    }
  </script>
</body>
</html>
